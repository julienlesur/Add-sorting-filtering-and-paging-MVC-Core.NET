@model JobList

@{
}

<h2>Current Jobs</h2>

<form class="form-inline py-2 my-2 my-lg-0 w-100 form-search" asp-controller="Jobs" asp-action="List" method="get">
    <input type="hidden" name="sortOrder" value="@Model.CurrentSort" />
    <div class="input-group w-50">
        <input type="text" class="form-control input-search-text" placeholder="Search in title or reference..." asp-for="@Model.SearchText" />
        <button class="btn bg-transparent btn-cancel-search" style="margin-left: -40px; z-index: 100; color:#95a5a6" title="Cancel search" onclick="return false;">
            <i class="fa fa-times"></i>
        </button>
    </div>
    <input type="submit" value="Search" class="btn btn-secondary ml-2" />
</form>

<div class="table-responsive">
    <table class="table table-striped table-dark">
        <thead>
            <tr class="table-primary">
                <th>
                    <a asp-controller="Jobs" asp-action="List" sort-order="title" current-sort="@Model.CurrentSort">
                        @Html.DisplayNameFor(model => model.Jobs.FirstOrDefault().Title)
                    </a>
                </th>
                <th>
                    <a asp-controller="Jobs" asp-action="List" sort-order="reference" current-sort="@Model.CurrentSort">
                        @Html.DisplayNameFor(model => model.Jobs.FirstOrDefault().Reference)
                    </a>
                </th>
                <th>
                    <a asp-controller="Jobs" asp-action="List" sort-order="company" current-sort="@Model.CurrentSort">
                        @Html.DisplayNameFor(model => model.Jobs.FirstOrDefault().Company)
                    </a>
                </th>
                <th>
                    <a asp-controller="Jobs" asp-action="List" sort-order="location" current-sort="@Model.CurrentSort">
                        @Html.DisplayNameFor(model => model.Jobs.FirstOrDefault().Location)
                    </a>
                </th>
                <th>

                </th>
                <th class="d-flex justify-content-center">
                    <a class="btn btn-sm" asp-controller="Jobs" asp-action="Add" title="Add job">
                        <i class="fas fa-plus text-white"></i>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var job in Model.Jobs)
            {
                <tr id="job@(job.JobId)">
                    <td>
                        @Html.DisplayFor(modelItem => job.Title)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => job.Reference)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => job.Company)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => job.Location)
                    </td>
                    <td>
                        <job-applicant-list job-reference="@job.Reference"></job-applicant-list>
                    </td>
                    <td class="d-flex justify-content-center">
                        <a class="btn btn-sm" asp-controller="Jobs" asp-action="Details" asp-route-id="@job.JobId" title="Details Job">
                            <i class="fas fa-info-circle"></i>
                        </a>
                        <a class="btn btn-sm" asp-controller="Jobs" asp-action="Edit" asp-route-id="@job.JobId" title="Edit job">
                            <i class="fas fa-pen"></i>
                        </a>
                        <form class="delete-job" asp-action="Delete" asp-controller="Jobs" asp-route-id="@job.JobId" method="post" onclick="return confirm('Do you really want to delete this job?')">
                            <input type="hidden" asp-for="@job.JobId" />
                            <button type="submit" class="btn btn-sm" title="Delete job">
                                <i class="fas fa-trash"></i>
                            </button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@section Scripts {
    <script src="~/js/searchList.js"></script>
}
